{"version":3,"sources":["meteor://ğŸ’»app/scripts/counter.js"],"names":[],"mappings":";;;;;;;;AAAA,IAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,MAAI,mBAAmB,CAAC;;AAExB,UAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,YAAM;AAC/B,2BAAuB,EAAE,CAAC;GAC3B,CAAC,CAAC;;AAEH,UAAQ,CAAC,OAAO,CAAC,OAAO,CAAC;AACvB,SAAK,EAAE,YAAY;AACjB,UAAI,aAAa,GAAG,OAAO,CAAC,OAAO,CAAC,EAAC,MAAM,EAAE,EAAE,EAAC,CAAC,CAAC;;AAElD,UAAG,aAAa,EAAC;AACf,eAAO,aAAa,CAAC,KAAK,CAAC;OAC5B,MAAI;AACH,eAAO,KAAK,CAAC;OACd;KACF;GACF,CAAC,CAAC;;AAEH,UAAQ,CAAC,OAAO,CAAC,MAAM,CAAC;AACtB,qBAAiB,EAAE,YAAY;AAC7B,eAAS,CAAC,EAAE,CAAC,CAAC;;AAEd,UAAG,MAAM,CAAC,IAAI,EAAE,EAAC;AACf,iBAAS,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;OAC5B;KACF;GACF,CAAC,CAAC;;AAEH,UAAQ,CAAC,eAAe,CAAC,OAAO,CAAC;AAC7B,iBAAa,EAAE,YAAU;AACvB,UAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,EAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,EAAC,CAAC,CAAC;;AAExD,UAAG,CAAC,MAAM,EAAC;AACT,cAAM,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,MAAM,EAAE,EAAE,UAAS,GAAG,EAAC;AACpD,cAAG,GAAG,EAAC;AACL,mBAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;WAClB;SACF,CAAC,CAAC;;AAEH,eAAO,KAAK,CAAC;OACd;;AAED,aAAO,MAAM,CAAC,KAAK,CAAC;KACrB;GACJ,CAAC,CAAC;;AAEH,WAAS,GAAG,UAAS,MAAM,EAAC;AAC1B,UAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM,EAAC,UAAS,KAAK,EAAC;AAChD,UAAG,KAAK,EAAC;AACP,eAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;OACpB,MAAI;AACH,iBAAS,CAAC,KAAK,CAAC,qBAAqB,EAAE;AACrC,gBAAM,EAAE,MAAM;AACd,kBAAQ,EAAE,OAAO,CAAC,OAAO,CAAC,EAAC,MAAM,EAAE,MAAM,EAAC,CAAC,CAAC,KAAK;SAClD,CAAC,CAAC;OACJ;KACF,CAAC,CAAC;GACN,CAAC;;AAEF,UAAQ,CAAC,OAAO,CAAC,YAAM;AACrB,QAAG,mBAAmB,EAAC;AACrB,yBAAmB,CAAC,IAAI,EAAE,CAAC;KAC5B;;AAED,2BAAuB,EAAE,CAAC;GAC3B,CAAC,CAAC;;AAEH,MAAI,uBAAuB,GAAG,YAAU;AACtC,uBAAmB,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;GACpE,CAAC;CACH;;AAED,IAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,sBAAoB,GAAG,UAAS,MAAM,EAAC;AACrC,QAAG,OAAO,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,MAAM,EAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,EAAC;AAC7C,aAAO,CAAC,MAAM,CAAC,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,EAAC,CAAC,CAAC;KAC5C;GACF,CAAC;;AAEF,UAAQ,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACxB,wBAAoB,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;GACxC,CAAC,CAAC;CACJ,wE","file":"/scripts/counter.js","sourcesContent":["if (Meteor.isClient) {\n  var counterSubscription;\n\n  Template.counter.onCreated(() => {\n    openCounterSubscription();\n  });\n\n  Template.counter.helpers({\n    count: function () {\n      var singleCounter = counter.findOne({userId: \"\"});\n\n      if(singleCounter){\n        return singleCounter.count;\n      }else{\n        return \"...\";\n      } \n    }\n  });\n\n  Template.counter.events({\n    'click #addCount': function () {\n      increment(\"\");\n\n      if(Meteor.user()){\n        increment(Meteor.userId());\n      }\n    }\n  });\n\n  Template.loggedinCounter.helpers({\n      personalCount: function(){\n        var uCount = counter.findOne({userId: Meteor.userId()});\n\n        if(!uCount){\n          Meteor.call('newCount', Meteor.userId(), function(err){\n            if(err){\n              console.log(err);\n            }\n          });\n\n          return \"...\";\n        }\n\n        return uCount.count;\n      }\n  });\n\n  increment = function(userId){\n    Meteor.call('incrementCount', userId,function(error){\n        if(error){\n          console.log(error);\n        }else{\n          analytics.track(\"Incremented Counter\", {\n            userId: userId,\n            newCount: counter.findOne({userId: userId}).count\n          });\n        }\n      });\n  };\n\n  Accounts.onLogin(() => {\n    if(counterSubscription){\n      counterSubscription.stop();\n    }\n\n    openCounterSubscription();\n  });\n\n  var openCounterSubscription = function(){\n    counterSubscription = Meteor.subscribe('counter', Meteor.userId());\n  };\n}\n\nif (Meteor.isServer) {\n  checkInitiateCounter = function(userId){\n    if(counter.find({userId: userId}).count() == 0){\n      counter.insert({count: 0, userId: userId});\n    }\n  };\n\n  Accounts.onLogin((param) => {\n      checkInitiateCounter(param.user._id);\n  });\n}\n"]}